<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acceuil</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" type="image/png" href="/img/fssm.jpg">
</head>

<body class="bg-gray-100 flex items-center justify-center min-h-screen">

<!-- Modal -->
<div id="username-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
    <div class="bg-white p-8 rounded-xl shadow-lg w-96 max-w-md">
        <h3 class="text-xl font-semibold mb-6 text-center">Bienvenue dans Groupe de Isi</h3>

        <form id="join-form" action="/chat" method="get">
            <div class="mb-6">
                <label for="username-input" class="block text-gray-700 text-sm font-medium mb-2">Nom ComplÃ¨te:</label>
                <input
                        name="username"
                        type="text"
                        id="username-input"
                        class="w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                        placeholder="Saisir Votre nom Complete"
                        required
                >
            </div>

            <button
                    type="button"
                    id="join-button"
                    class="w-full bg-blue-500 text-white p-3 rounded-lg hover:bg-blue-600 transition duration-300 focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50"
            >
                Rejoindre au conersation
            </button>
        </form>
    </div>
</div>

<script>
        document.getElementById('join-button').addEventListener('click', function(event) {
            // EmpÃªcher la soumission par dÃ©faut du formulaire
            event.preventDefault();

            // RÃ©cupÃ©rer la valeur de l'input username
            const username = document.getElementById('username-input').value;

            // VÃ©rifier que le nom d'utilisateur est valide
            if (username.trim() === '') {
                alert("Veuillez entrer un nom d'utilisateur valide.");
                return;
            }

            // Construire l'URL avec le paramÃ¨tre username
            const url = '/chat?username=' + encodeURIComponent(username);

            // Rediriger l'utilisateur vers l'URL avec le paramÃ¨tre username
            window.location.href = url;
        });
    </script>
<script src="../static/js/home.js"></script>
<script>

    // Fonction pour injecter le sÃ©lecteur d'icÃ´nes
document.addEventListener("DOMContentLoaded", function () {
    // CrÃ©er un conteneur pour le sÃ©lecteur d'icÃ´nes
    const emojiContainer = document.createElement("div");
    emojiContainer.id = "emoji-picker";
    emojiContainer.className = "flex space-x-2 mb-2 hidden";
    emojiContainer.innerHTML = `
        <button class="text-2xl" onclick="insertEmoji('ğŸ˜Š')">ğŸ˜Š</button>
        <button class="text-2xl" onclick="insertEmoji('ğŸ˜‚')">ğŸ˜‚</button>
        <button class="text-2xl" onclick="insertEmoji('â¤ï¸')">â¤ï¸</button>
        <button class="text-2xl" onclick="insertEmoji('ğŸ‘')">ğŸ‘</button>
        <button class="text-2xl" onclick="insertEmoji('ğŸ”¥')">ğŸ”¥</button>
        <button class="text-2xl" onclick="insertEmoji('ğŸ‰')">ğŸ‰</button>
    `;

    // InsÃ©rer le sÃ©lecteur d'Ã©moticÃ´nes juste avant la zone d'envoi
    const inputArea = document.querySelector(".p-4.border-t");
    if (inputArea) {
        inputArea.insertAdjacentElement("afterbegin", emojiContainer);

        // Ajouter un bouton pour ouvrir/fermer le sÃ©lecteur d'icÃ´nes
        const toggleButton = document.createElement("button");
        toggleButton.className = "text-2xl mr-2";
        toggleButton.innerHTML = "ğŸ˜Š";
        toggleButton.onclick = function () {
            emojiContainer.classList.toggle("hidden");
        };
        inputArea.insertAdjacentElement("afterbegin", toggleButton);
    }
});

// Fonction pour insÃ©rer une icÃ´ne dans le champ de texte
function insertEmoji(emoji) {
    const messageInput = document.getElementById("message-input");
    if (messageInput) {
        messageInput.value += emoji;
        messageInput.focus();
    }
}

// Raccourci pour envoyer un message avec la touche "EntrÃ©e"
function handleKeyPress(event) {
    if (event.key === "Enter") {
        sendMessage();
    }
}

// Fonction existante pour envoyer un message
function sendMessage() {
    const messageInput = document.getElementById("message-input");
    const messageContent = messageInput.value;
    if (messageContent.trim() !== "") {
        const messagesContainer = document.getElementById("messages-container");
        const newMessage = document.createElement("div");
        newMessage.classList.add("text-right", "mt-2");
        newMessage.innerHTML = `
            <div class="max-w-[70%] bg-blue-500 text-white ml-auto p-3 rounded-lg shadow-md">
                <p class="font-semibold">Vous</p>
                <p>${messageContent}</p>
            </div>`;
        messagesContainer.appendChild(newMessage);
        messageInput.value = "";
        messagesContainer.scrollTop = messagesContainer.scrollHeight; // Scroll automatique
    }
}

</script>
</body>

</html>
